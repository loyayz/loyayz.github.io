[{"content":"基于 Hugo 搭建并部署在 Github Pages 1 安装 Hugo 官网教程 新建目录C:\\programs\\hugo 在官网 下载最新版，本次下载 hugo_extended_0.99.1_Windows-64bit.zip 解压 zip 文件，并将解压出的hugo.exe移到C:\\programs\\hugo 添加环境变量： win+R -\u0026gt; sysdm.cpl -\u0026gt; 高级 -\u0026gt; 环境变量(N)\u0026hellip; -\u0026gt; 系统变量(S) -\u0026gt; 双击 Path -\u0026gt; 新建 -\u0026gt; 输入C:\\programs\\hugo 打开命令行，输入hugo version，显示版本号即安装成功 升级 Hugo：下载新版覆盖C:\\programs\\hugo\\hugo.exe\n2 创建网站 2.1 生成网站 新建目录C:\\code\\loyayz\\loyayz.github.io用于存放网站源码 执行命令生成网站 初始化 git 仓库，未安装 git 请先安装：Git 官网 1 2 3 cd C:\\code\\loyayz\\loyayz.github.io hugo new site . -f yml git init 2.2 使用主题 下载：在官网 挑选主题 22/06/03 updated：如果你喜欢本站的风格，可以使用我的主题 PaperModx\n1 git submodule add --depth=1 https://github.com/loyayz/hugo-PaperModx.git themes/PaperModx 本次使用 PaperMod 1 git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod 修改网站配置：我是直接用示例配置 覆盖后再修改 ./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 baseURL: \u0026#34;https://loyayz.github.io/\u0026#34; title: loyayz theme: PaperModx paginate: 10 enableInlineShortcodes: true enableRobotsTXT: true enableEmoji: true pygmentsUseClasses: true hasCJKLanguage: true defaultContentLanguage: zh timeZone: \u0026#34;Asia/Shanghai\u0026#34; buildDrafts: false buildFuture: false buildExpired: false minify: disableXML: true # minifyOutput: true languages: zh: languageName: \u0026#34;中文\u0026#34; weight: 1 taxonomies: category: categories tag: tags menu: main: - name: 文章 url: posts/ weight: 1 - name: 分类 url: categories/ weight: 2 - name: 标签 url: tags/ weight: 3 outputs: home: - HTML - RSS - JSON params: env: production title: \u0026#34;loyayz\u0026#39;s blog\u0026#34; description: \u0026#34;loyayz\u0026#39;s blog - https://loyayz.com\u0026#34; author: loyayz images: [\u0026#34;papermod-cover.png\u0026#34;] keywords: [loyayz,ideaworlds,simpleframework] DateFormat: \u0026#34;2006-01-02\u0026#34; ShowReadingTime: false ShowShareButtons: false ShowCodeCopyButtons: true ShowFullTextinRSS: false defaultTheme: auto disableThemeToggle: false disableSpecial1stPost: true disableScrollToTop: false disableAnchoredHeadings: false hideMeta: false hideSummary: false showtoc: true tocopen: false ShowPostNavLinks: true ShowBreadCrumbs: true ShowWordCount: false ShowRssButtonInSectionTermList: false comments: false hideFooter: true #homeInfoParams: # Title: \u0026#34;\u0026#34; # Content: socialIcons: - name: github url: \u0026#34;https://github.com/loyayz\u0026#34; - name: email url: \u0026#34;mailto:loyayz@foxmail.com\u0026#34; - name: RsS url: \u0026#34;index.xml\u0026#34; markup: goldmark: renderer: unsafe: true highlight: codeFences: true guessSyntax: true lineNos: true style: monokai privacy: disqus: disable: true googleAnalytics: disable: true instagram: disable: true twitter: disable: true vimeo: disable: true youtube: disable: true 拓展：如下新建文件方便拓展custom.css、extend_head.html、extend_footer.html 1 2 3 4 5 6 7 8 9 10 .(loyayz.github.io) ├── config.yml ├── assets/ │ └── css/ │ └── extended/ │ └── custom.css └── layouts └── partials ├── extend_footer.html └── extend_head.html 2.3 本地调试 命令行内执行命令后，在浏览器打开http://localhost:1313可预览网站\n1 hugo server -D 3 部署到 Github Pages 3.1 新建脚本 Windows 一键提交脚本 ./deploy.bat 1 2 3 4 @echo off git add . git commit -m \u0026#34;update\u0026#34; git push Linux 一键提交脚本 ./deploy.sh 1 2 3 4 #!/bin/sh git add . git commit -m \u0026#34;update\u0026#34; git push GitHub Action 自动化部署脚本 ./.github/workflows/gh-pages.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 name: github pages on: push: branches: - master pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true fetch-depth: 1 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/master\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public 3.2 创建远程仓库 创建远程仓库：打开 GitHub 创建仓库，仓库名为loyayz.github.io其他都不选 新建.gitignore文件避免误操作提交文件 ./.gitignore 1 2 3 4 5 6 7 public/ .idea/* .vscode/* !.vscode/settings.json !.vscode/tasks.json !.vscode/launch.json !.vscode/extensions.json 关联本地和远程仓库，提交并推送到 Github 1 2 3 4 5 git add . git commit -m \u0026#34;init\u0026#34; git branch -M master git remote add origin https://github.com/loyayz/loyayz.github.io.git git push --set-upstream origin master 新建仓库说明文档 ./README.md 1 2 3 4 5 6 7 8 9 本仓库使用 git submodule 引用主题仓库，因此 git clone 本仓库后需要再执行下句命令 git submodule update --init --recursive 后续若要更新主题，执行下句命令 git submodule update --remote --merge 部署：双击`deploy.bat`或执行命令`sh deploy.sh` 双击deploy.bat推送到 Github 触发自动化部署 3.3 修改 Github Pages GitHub Action默认生成网站到gh-pages分支，因此需要修改Github Pages来源\n浏览器打开远程仓库，进入设置页面：Settings -\u0026gt; Pages 将Source 分支中的master换成gh-pages 浏览器打开链接https://loyayz.github.io即可看到网站 4 创建文章 执行命令行启动服务，浏览器打开http://localhost:1313预览网站 1 hugo server -D 打开另一个命令行执行命令创建文章，网站将实时显示新的文章 1 hugo new posts/website/hugo-init.md 编辑文章 ./content/posts/website/hugo-init.md 1 2 3 4 5 6 7 8 9 10 --- title: \u0026#34;Hugo Github Pages 网站搭建\u0026#34; date: 2022-05-27 draft: false isCJKLanguage: true tags: [\u0026#34;hugo\u0026#34;] categories: [\u0026#34;website\u0026#34;] --- 基于 [Hugo](https://gohugo.io) 搭建并部署在 [Github Pages](https://pages.github.com) 注意：draft需改为false表示该文章不是草稿，否则推送到远程仓库后不会部署该文章\n双击deploy.bat部署，稍等几秒后刷新https://loyayz.github.io即可看到网站新内容 ","permalink":"https://loyayz.com/website/220527-hugo-init/","summary":"基于 Hugo 搭建并部署在 Github Pages 1 安装 Hugo 官网教程 新建目录C:\\programs\\hugo 在官网 下载最新版，本次下载 hugo_extended_0.99.1_Windows-64bit.zip 解压 zip 文件，并将解压出的hugo.","title":"Hugo Github Pages 网站搭建"},{"content":"系统信息\n主机：Windows 10 Pro 虚拟机： VMware Workstation 16 Pro 16.2.3 麒麟系统：Kylin-Server-10-SP1-Release-Build20-20210518-x86_64 虚拟机的窗口分辨率无法自适应麒麟系统的分辨率，其他系统可以通过自动安装 VMware Tools解决，不过这无法用于麒麟系统，因为\u0026quot;安装 VMware Tools\u0026ldquo;是灰色的点不了。\n以下是手动安装 VMware Tools 步骤：\n麒麟虚拟机关机 打开麒麟虚拟机设置 VMware 选中麒麟虚拟机 -\u0026gt; 右键点击 -\u0026gt; 选择“设置”\n挂载 VMware linux 上一步打开的”虚拟机设置“弹窗中点击”添加(A)\u0026hellip;“\n选择”CD/DVD 驱动器“，点击”完成“\n在”虚拟机设置“弹窗中找到刚添加的”CD/DVD“，选中它，在它右边会显示属性”设备状态“、”连接“\n”设备状态“下勾选启动时连接(O)\n”连接“下选择使用 ISO 映像文件(M):，点击它下面的游览(B)...按钮，在弹窗中找到 VMware 安装目录下的 linux.iso\n点击”确定“，保存虚拟机设置\n麒麟虚拟机开机，进入虚拟机打开我的电脑可以看到可移动存储设备下有两个盘 VMware Tools Kylin-Server-10 进入VMware Tools 目录，在目录内空白处点击右键，选择在终端中打开(T) 解压 VMwareTools 1 tar zxvf VMware-10.3.23-16594550.tar.gz -C /opt 安装 VMwareTools 1 /opt/vmware-tools-distrib/vmware-install.pl 执行命令后有选项的话全部按Enter键 ","permalink":"https://loyayz.com/coding/220715-kylin-install-vmware-tools/","summary":"系统信息 主机：Windows 10 Pro 虚拟机： VMware Workstation 16 Pro 16.2.3 麒麟系统：Kylin-Server-10-SP1-Release-Build20-2021","title":"虚拟机麒麟系统安装 VMware Tools"},{"content":"IdeaWorlds 前端开发笔记（四）\n本篇目标：实现网站布局，其中页头全站固定，内容区将随着导航切换而显示对应的组件。\nheader content 编辑应用组件\nsrc/app/app.component.html 1 2 3 4 5 6 7 8 \u0026lt;div class=\u0026#34;page\u0026#34;\u0026gt; \u0026lt;header\u0026gt; \u0026lt;div class=\u0026#34;page-header\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;div class=\u0026#34;page-main\u0026#34;\u0026gt; \u0026lt;router-outlet\u0026gt;\u0026lt;/router-outlet\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; 添加样式\nsrc/styles.less 1 2 3 4 5 6 7 8 :root { --iws-gap: 16px; --iws-page-color: #f0f2f5; --iws-background-color: #ffffff; --iws-header-height: 50px; --iws-header-width: 1200px; --iws-main-width: 1000px; } src/app/app.component.less 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 .page { box-sizing: border-box; display: flex; flex: auto; flex-direction: column; background: var(--iws-page-color); } header { position: fixed; width: 100%; height: var(--iws-header-height); background: var(--iws-background-color); margin-bottom: 1px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); z-index: 100; } .page-header { width: var(--iws-header-width); line-height: var(--iws-header-height); margin: 0 auto; } .page-main { width: var(--iws-main-width); min-height: calc(~\u0026#34;100vh - var(--iws-header-height) - var(--iws-gap)\u0026#34;); margin: calc(~\u0026#34;var(--iws-header-height) + var(--iws-gap)\u0026#34;) auto 0 auto; } ","permalink":"https://loyayz.com/coding/220619-iws-client-layout/","summary":"IdeaWorlds 前端开发笔记（四） 本篇目标：实现网站布局，其中页头全站固定，内容区将随着导航切换而显示对应的组件。 header content 编辑应用组件 src/app/app.component.html 1 2 3 4 5 6 7 8 \u0026lt;div class=\u0026#34;page\u0026#34;\u0026gt; \u0026lt;header\u0026gt;","title":"IdeaWorlds 网站布局"},{"content":"IdeaWorlds 前端开发笔记（三）\n本篇目标：介绍本项目的前端自动化部署。\n趁 618 买了台腾讯云的服务器折腾了下，因此先提前写下前端部署的笔记，完整流程：\n开通容器镜像服务 -\u0026gt; 创建命名空间 ideaworlds -\u0026gt; 创建两个镜像仓库 www、console 服务器安装 Docker -\u0026gt; 登录私服 服务器安装 Nginx 并反向代理前端目录 GitHub Action 监听部署分支 1. 前端工程 1.1 GitHub Action 流程配置 自动部署流程 从分支名解析出当前要部署的项目（例：release/www -\u0026gt; 部署www） 设置 Docker 镜像名：{私有仓库}/{命名空间}/{项目名} 获取当前日期、checkout 最新代码、设置 nodejs 环境 npm 打包要部署的项目，并将打包后的文件移到./deploy/dist/ Docker 打包./deploy/：{镜像名}:latest、{镜像名}:当前日期 Docker 登录私有仓库，推送刚打包的两个镜像到仓库 ssh 登录服务器（注意：该服务器需先手动登录 Docker 私有仓库） 创建前端目录：/app/{命名空间}/{项目名} 拉取刚推送的镜像：镜像名:latest 映射前端目录启动一个临时容器，执行成功后将在前端目录创建三个子目录 prev （存放上次的文件，即先从 latest/ 移到 prev/ ） latest （存放最新的文件） latest_bak （存放最新的文件） 删除镜像 ./.github/workflows/deploy.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 name: deploy on: push: branches: [ \u0026#34;release/*\u0026#34; ] workflow_dispatch: env: docker-registry: ccr.ccs.tencentyun.com docker-namespace: ideaworlds remote-workdir: /app jobs: deploy: runs-on: ubuntu-latest steps: - name: Set env.project run: | echo \u0026#34;project=${GITHUB_REF#refs/heads/release/}\u0026#34; \u0026gt;\u0026gt; $GITHUB_ENV - name: Set env.image run: | echo \u0026#34;image=${{ env.docker-registry }}/${{ env.docker-namespace }}/${{ env.project }}\u0026#34; \u0026gt;\u0026gt; $GITHUB_ENV - name: Get Time id: time uses: nanzm/get-time-action@v1.1 with: timeZone: 8 format: \u0026#39;YYMMDD\u0026#39; - uses: actions/checkout@v3 - uses: actions/setup-node@v3 with: node-version: 18 cache: \u0026#39;npm\u0026#39; - name: npm build run: | npm ci npm run build:${{ env.project }} mv ./dist/${{ env.project }}/ ./deploy/dist/ - name: docker build run: | cd ./deploy docker build -t ${{ env.image }}:latest . docker tag ${{ env.image }}:latest ${{ env.image }}:${{ steps.time.outputs.time }} - name: Login to Docker Registry uses: docker/login-action@v2 with: registry: ${{ env.docker-registry }} username: ${{ secrets.DOCKER_USER }} password: ${{ secrets.DOCKER_TOKEN }} - name: Push to Docker Registry run: | docker push ${{ env.image }}:latest docker push ${{ env.image }}:${{ steps.time.outputs.time }} - name: Run Docker Image uses: appleboy/ssh-action@master with: host: ${{ secrets.REMOTE_HOST }} username: ${{ secrets.REMOTE_USER }} key: ${{ secrets.REMOTE_KEY }} script_stop: true script: | mkdir -p ${{ env.remote-workdir }}/${{ env.docker-namespace }}/${{ env.project }} docker pull ${{ env.image }}:latest docker run --rm -v ${{ env.remote-workdir }}/${{ env.docker-namespace }}/${{ env.project }}:/app/data ${{ env.image }}:latest docker rmi ${{ env.image }}:latest 1.2 Angular 打包 开启 gzip\n1 2 npm install --save-dev gulp-gzip npm install --save-dev gulp ./gulpfile.js 1 2 3 4 5 6 7 8 9 // gulpfile.js 与 package.json 同级 let gulp = require(\u0026#39;gulp\u0026#39;); let gzip = require(\u0026#39;gulp-gzip\u0026#39;); gulp.task(\u0026#39;compress\u0026#39;, function () { return gulp.src([\u0026#39;./dist/**/*.js\u0026#39;, \u0026#39;./dist/**/*.css\u0026#39;]) .pipe(gzip()) .pipe(gulp.dest(\u0026#39;./dist\u0026#39;)); }); 修改部署包大小限制\nAngular 默认打包大小超过 1m 会失败，我们的原部署包刚好超过 1m 一点点，gzip 压缩后不到 200k，因此需要放开这个限制。\n./angular.json 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 { \u0026#34;projects\u0026#34;: { \u0026#34;www\u0026#34;: { \u0026#34;architect\u0026#34;: { \u0026#34;build\u0026#34;: { \u0026#34;configurations\u0026#34;: { \u0026#34;production\u0026#34;: { { \u0026#34;type\u0026#34;: \u0026#34;initial\u0026#34;, \u0026#34;maximumWarning\u0026#34;: \u0026#34;1mb\u0026#34;, \u0026#34;maximumError\u0026#34;: \u0026#34;2mb\u0026#34; 修改这个 } }, \u0026#34;console\u0026#34;: 同上面 } 编写打包脚本\n./package.json 1 2 3 4 5 6 7 8 9 10 { \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start:www\u0026#34;: \u0026#34;ng serve --project www --open\u0026#34;, \u0026#34;build:www\u0026#34;: \u0026#34;ng build --project www \u0026amp;\u0026amp; gulp compress\u0026#34;, \u0026#34;start:console\u0026#34;: \u0026#34;ng serve --project console --open\u0026#34;, \u0026#34;build:console\u0026#34;: \u0026#34;ng build --project console \u0026amp;\u0026amp; gulp compress\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;npm run build:www \u0026amp;\u0026amp; npm run build:console\u0026#34; } } 1.3 Docker 打包 Dockerfile ./deploy/Dockerfile 1 2 3 FROM alpine:latest COPY . /app ENTRYPOINT [\u0026#34;sh\u0026#34;, \u0026#34;/app/docker-entrypoint.sh\u0026#34;] Docker 容器内自动执行脚本 ./deploy/docker-entrypoint.sh 1 2 3 4 5 6 7 8 9 10 #!/bin/sh mkdir -p ./app/data/prev/ mkdir -p ./app/data/latest/ mkdir -p ./app/data/latest_bak/ rm -rf ./app/data/prev/ mv ./app/data/latest/ ./app/data/prev/ cp -r ./app/dist/ ./app/data/latest/ rm -rf ./app/data/latest_bak/ cp -r ./app/dist/ ./app/data/latest_bak/ 2. 服务器 2.1 安装 Docker 安装文档：Docker 官网 、腾讯云 开通容器镜像服务并登录私服 2.2 配置 Nginx 使用docker compose启动 Nginx 服务\n创建 Nginx 目录 1 2 mkdir -p /data/nginx mkdir -p /data/nginx/conf.d 编写 Docker Compose 配置 /data/nginx/docker-compose.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 version: \u0026#39;3.0\u0026#39; services: nginx: restart: always image: nginx:latest container_name: nginx ports: - 80:80 - 443:443 volumes: - ./nginx.conf:/etc/nginx/nginx.conf - ./conf.d:/etc/nginx/conf.d - ./logs:/var/log/nginx 使用nginx:latest镜像启动一个名为nginx的容器，并映射服务器的 80 和 443 端口。\n启动 Nginx 服务 1 docker compose up -d 编写两个脚本用于更新 Nginx 服务 /data/nginx/test_conf.sh 1 docker exec nginx nginx -t /data/nginx/reload_nginx.sh 1 docker exec nginx nginx -s reload 修改 Nginx 配置后\n执行 sh ./test_conf.sh 校验配置是否正常\n执行 sh ./reload_nginx.sh 重启 Nginx 服务\n配置前端反向代理 在./conf.d/目录下新建 Nginx 配置文件并指向前端目录/app/ideaworlds/ www.ideaworlds.info -\u0026gt; www/latest、www/latest_bak console.ideaworlds.info -\u0026gt; console/latest、console/latest_bak 重启 Nginx 服务 2.3 生成密钥 腾讯云文档 3. GitHub 进入 远程仓库的设置选项 在Secrets/actions添加几个仓库的密钥\nkey 说明 DOCKER_USER Docker 私服用户名 DOCKER_TOKEN Docker 私服用户密码 REMOTE_HOST 远程服务器 ip REMOTE_USER 远程服务器 ssh 用户名 REMOTE_KEY 远程服务器 ssh 私钥 4. 总结 以上全部为一次性配置后续无需再修改，前端工程中推送代码到 release/ 开头的分支将触发 GitHub Action 部署流程，自动打包前端代码更新到服务器对应的目录下。\n","permalink":"https://loyayz.com/coding/220618-iws-client-cicd/","summary":"IdeaWorlds 前端开发笔记（三） 本篇目标：介绍本项目的前端自动化部署。 趁 618 买了台腾讯云的服务器折腾了下，因此先提前写下前端部署的笔记，完整流程： 开通容器","title":"IdeaWorlds 前端自动化部署"},{"content":"IdeaWorlds 前端开发笔记（二）\n本篇目标：介绍本项目的前端工程结构规范。\n1. 为什么要有结构规范？ 合理的结构能让开发人员快速定位到与特性有关的所有文件 良好的结构有助于拓展，当代码库随着功能丰富而增长时不会导致混乱 对应用程序应该如何构建有一个共同的理解会让团队协作更容易 2. 遵循的原则 LIFT | Angular 风格指南 快速定位代码\n坚持直观、简单和快速地定位代码，把相关的文件放在一起。\n一眼识别代码\n坚持命名文件到这个程度：看到名字立刻知道它包含了什么，代表了什么。\n保持扁平结构\n坚持尽可能保持扁平的目录结构。考虑当同一目录下有很多个文件时创建子目录。\nT-DRY (Try to be DRY) 尽量不重复自己\n坚持 DRY（Don\u0026rsquo;t Repeat Yourself，不重复自己）。避免过度 DRY，以致牺牲了阅读性。\n3. 工程目录 在上一篇 初始化前端工程 中，我们创建了一个空的多应用 Angular 工程，目录结构如下\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 idea-worlds │ angular.json │ ... └─projects ├─console │ └─src │ ├─app # 应用逻辑代码 │ ├─assets # 静态资源 │ └─environments # 环境配置 ├─libs │ └─src └─www └─src ├─app ├─assets └─environments 在项目的根文件夹中可以看到应用和库都放在projects，并都有一个src文件夹用来存放代码。\n4. 应用规范 现在我们要制定的是src/app内的规范。\n先简单描述下常见的用户界面：\n页头：公共的头部，比如网站 logo、导航 页尾：公共的尾部，比如网站信息、备案信息 侧边栏：公共的侧边，比如导航、广告位 内容区：显示当前页面的内容 主导航：或者称为菜单，可放在页头或者侧边栏，用来切换内容区 当然，除了内容区其他部件都不是必要的，但大部分应用都是它们的组合，可以点此查看一些典型的布局 。 我们将这些控制应用布局的组件统称为应用外壳，将应用的功能组件统称为特性组件。显然，它们的代码应该存放在不同的文件夹下。而随着代码的日益复杂，一定会出现公共的东西（比如工具类），也应该有一个文件夹来存放这些公共代码。\n现在，我们就可以确立第一个规范：\n将代码文件分为三大类 1 2 3 4 app ├─features # 特性组件代码 ├─framework # 应用外壳代码 └─shared # 公共代码 随着应用功能的增加，代码文件会相对应的增长。如果都直接放在同一文件夹下，会使该文件夹非常杂乱且不易快速定位，这样违反了上面遵循的原则 。而要了解应用的功能特性，看菜单导航是个很好的方式，所以将features内的代码文件根据菜单划分就非常合理。\n这样，我们就可以确立第二个规范：\n根据菜单导航划分特性代码文件 1 2 3 4 5 6 7 app ├─features │ ├─home │ ├─idea │ └─people ├─framework └─shared features文件夹内被划分成一个个特性区，为进一步隔离不同特性区内代码，我们将为这些特性区创建它自己的模块，这样可以对其它模块隐藏自己的实现，从逻辑上避免不同特性区的耦合。\n我们在开发的时候，通常都要遵循单一职责原则，这在 Angular 代码文件中的体现就是：每个文件只定义一样东西（例如服务或组件）。这样特性模块内的代码就自然地形成多种类型文件，为避免太多文件弄乱文件夹，我们可以进一步划分它们。\n根据类型划分特性模块内的代码文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 app ├─features │ ├─home │ │ ├─components │ │ ├─models │ │ └─services │ ├─idea │ │ ├─components │ │ ├─models │ │ └─services │ └─people │ ├─components │ ├─models │ └─services ├─framework └─shared 5. 公共库规范 以前还没这样做过，暂未想好，随着后续开发再补充吧。\n","permalink":"https://loyayz.com/coding/220616-iws-client-project-structure/","summary":"IdeaWorlds 前端开发笔记（二） 本篇目标：介绍本项目的前端工程结构规范。 1. 为什么要有结构规范？ 合理的结构能让开发人员快速定位到与特性有关的所有文件 良好的","title":"IdeaWorlds 前端工程结构"},{"content":"IdeaWorlds 前端开发笔记（一）\n本篇目标：介绍 Angular 工程初始化步骤。\n《IdeaWorlds 前端开发笔记》记录从初始化到部署的过程，前端选用的Angular在国内使用人较少，希望本系列文章能帮助到初识该框架的开发，也希望未来会有同伴参与本项目。\n1. 项目说明 IdeaWorlds 是一个创意分享平台，并将提供一系列快速实现软件系统相关创意的服务。\n前端选型 框架：Angular 组件库：NG-ZORRO 2. 搭建本地开发环境 安装 Node.js\nAngular 需要 Node.js 和 npm 包管理器，请先参阅 nodejs.org 安装他们。\n安装 Angular CLI\n打开终端输入如下命令：\n1 npm install -g @angular/cli@v13 Angular 开发一般使用 Angular CLI 来创建项目，生成应用和库代码，以及执行各种持续开发任务，比如测试、打包和部署。\n写本篇时Angular 14刚发布不久，我选用的NG-ZORRO还没有适配，为避免可能的问题这里先指定安装v13，后续等适配后再升级到最新版。\n3. 创建工作区 打开终端输入如下命令，将在当前目录创建idea-worlds文件夹，并在该文件夹内生成配置文件\n1 ng n idea-worlds --create-application false 说明：\nng n idea-worlds 创建一个 Angular 新工作空间，并将工程命名为 idea-worlds\n--create-application false 创建空工作空间，因为我计划在同一个工程中放多个应用程序\n4. 初始化应用 目前我计划在同一个工程中放两个应用（展示前台、管理后台）和一个公共库\n1 2 3 4 cd idea-worlds ng g application www --routing --skip-tests --style less ng g application console --routing --skip-tests --style less ng g library libs --prefix iws 说明：\nng g application www 创建一个名为 www 的应用\nng g application console 创建一个名为 console 的应用\nng g library libs 创建一个名为 libs 的公共库\n--routing 创建一个路由\n--skip-tests 不生成测试文件\n--style less 指定样式文件的拓展名，因为NG-ZORRO使用less，保持一致避免出错\n--prefix iws 指定库组件的前缀\n5. 初始化 NG-ZORRO 1 2 ng add ng-zorro-antd --project www ng add ng-zorro-antd --project console 说明：\n为www和console两个应用添加NG-ZORRO组件库\n执行命令时会有交互选择，多语言选zh_CN，其他直接按Enter键\n6. 启动应用 启动www应用\n1 ng serve --project www --open 启动console应用\n1 ng serve --project console --open 说明：\nng serve 命令会启动开发服务器、监视文件，并在这些文件发生更改时重建应用\n--open 选项会自动打开你的浏览器，并访问 http://localhost:4200/\n--project 指定要启动的应用，可以用ng serve --open启动www，因为他是默认应用\n","permalink":"https://loyayz.com/coding/220615-iws-client-init/","summary":"IdeaWorlds 前端开发笔记（一） 本篇目标：介绍 Angular 工程初始化步骤。 《IdeaWorlds 前端开发笔记》记录从初始化到部署的过程，前端选用的Angular在","title":"IdeaWorlds 初始化前端工程"},{"content":"需求：加一个参数控制是否禁用head.html中的integrity校验。\n起因：我有个网站的部署方式是手动打包后git push到远端，服务器git pull打包后的文件。部署之后网站样式都不见了，打开调试工具F12发现报错。\n1 Failed to find a valid digest in the \u0026#39;integrity\u0026#39; attribute for resource ...... The resource has been blocked. 搜索后发现是因为 PaperMod 的模板 head.html 中有几个资源的引用加了integrity属性防止被篡改，属性说明查看这里 | mozilla mdn ./layouts/partials/head.html 69 \u0026lt;link crossorigin=\u0026#34;anonymous\u0026#34; href=\u0026#34;{{ $stylesheet.RelPermalink }}\u0026#34; integrity=\u0026#34;{{ $stylesheet.Data.Integrity }}\u0026#34; rel=\u0026#34;preload stylesheet\u0026#34; as=\u0026#34;style\u0026#34;\u0026gt; ./layouts/partials/head.html 82 \u0026lt;script defer crossorigin=\u0026#34;anonymous\u0026#34; src=\u0026#34;{{ $search.RelPermalink }}\u0026#34; integrity=\u0026#34;{{ $search.Data.Integrity }}\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; ./layouts/partials/head.html 94 \u0026lt;script defer crossorigin=\u0026#34;anonymous\u0026#34; src=\u0026#34;{{ $highlight.RelPermalink }}\u0026#34; integrity=\u0026#34;{{ $highlight.Data.Integrity }}\u0026#34; 猜测可能是 git 提交时某个环节把打包文件中的空格或者换行符去掉了导致校验失败，所以加了个全局参数控制是否需要这个属性，如果你也有这个报错可以试试。\n实现方式：\n1 2 \u0026lt;!-- 上面三个 integrity 用 if 包起来，像这样 --\u0026gt; {{- if (not site.Params.disableResourceIntegrity) }} integrity=\u0026#34;...\u0026#34; {{- end }} 使用姿势：\n./config.yml 1 2 params: disableResourceIntegrity: true ","permalink":"https://loyayz.com/website/220614-hugo-papermodx-allow-disable-integrity/","summary":"需求：加一个参数控制是否禁用head.html中的integrity校验。 起因：我有个网站的部署方式是手动打包后git push到远端，服务器","title":"PaperMod 允许禁用校验文件完整性"},{"content":"需求：新建一个模板，支持在文章正文中显示多标签页\n实现步骤：\n创建模板\n./layouts/shortcodes/tabs.html 1 2 3 4 \u0026lt;div class=\u0026#34;x-tabs\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;x-tabs-nav\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;x-tabs-content\u0026#34;\u0026gt;{{ .Inner }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ./layouts/shortcodes/tab.html 1 2 3 \u0026lt;div class=\u0026#34;x-tab\u0026#34; title=\u0026#34;{{ .Get 0 }}\u0026#34;\u0026gt; {{ .Inner }} \u0026lt;/div\u0026gt; 添加样式\n./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 .x-tabs { margin: 8px 0; display: block; border: 1px solid var(--tertiary); border-radius: 2px; } .x-tabs-nav { position: relative; display: flex; flex: none; background-color: var(--theme); border-bottom: 1px solid var(--tertiary); } .x-tabs-nav-item.active { border-bottom: 1px solid #1890ff; } .x-tabs-nav-item \u0026gt; span { display: block; color: var(--primary); font-size: 16px; padding: 4px 16px; } .x-tabs-nav-item.active \u0026gt; span, .x-tabs-nav-item \u0026gt; span:hover { color: #1890ff !important; } .x-tab { display: none; padding: 8px 16px; } .x-tab.active { display: block; } 添加脚本\n./layouts/partials/footer.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 \u0026lt;script\u0026gt; const removeClass = (parent, el, className) =\u0026gt; { parent.querySelectorAll(el).forEach($el =\u0026gt; { $el.classList.remove(className); }); }; document.querySelectorAll(\u0026#39;.x-tabs\u0026#39;).forEach(tabs =\u0026gt; { const $tabsNav = tabs.querySelector(\u0026#39;.x-tabs-nav\u0026#39;); const $tabsContent = tabs.querySelector(\u0026#39;.x-tabs-content\u0026#39;); tabs.querySelectorAll(\u0026#39;.x-tab\u0026#39;).forEach(tab =\u0026gt; { const title = tab.getAttribute(\u0026#39;title\u0026#39;) || \u0026#39;tab\u0026#39;; const nav = document.createElement(\u0026#39;div\u0026#39;); nav.classList.add(\u0026#39;x-tabs-nav-item\u0026#39;) nav.innerHTML = \u0026#39;\u0026lt;span\u0026gt;\u0026#39; + title + \u0026#39;\u0026lt;/span\u0026gt;\u0026#39;; $tabsNav.append(nav); }); tabs.querySelectorAll(\u0026#39;.x-tabs-nav-item\u0026#39;).forEach($navItem =\u0026gt; { $navItem.addEventListener(\u0026#39;click\u0026#39;, e =\u0026gt; { e.preventDefault(); removeClass(tabs, \u0026#39;.x-tabs-nav-item\u0026#39;, \u0026#39;active\u0026#39;); removeClass(tabs, \u0026#39;.x-tab\u0026#39;, \u0026#39;active\u0026#39;); $navItem.classList.add(\u0026#39;active\u0026#39;); const index = Array.from($navItem.parentNode.children).indexOf($navItem); $tabsContent.children.item(index).classList.add(\u0026#39;active\u0026#39;); }); }); const $firstNav = $tabsNav.querySelector(\u0026#39;.x-tabs-nav-item:first-child\u0026#39;); if ($firstNav) { $firstNav.click(); } }); \u0026lt;/script\u0026gt; 使用姿势\n1 2 3 4 5 6 7 8 {{ % tabs %}} {{ % tab \u0026#34;Java\u0026#34; %}} 第一个 tab，注意 {{ 和 % 之间有个空格，使用的时候记得去掉 {{ % /tab %}} {{ % tab \u0026#34;JavaScript\u0026#34; %}} 第二个 tab {{ % /tab %}} {{ % /tabs %}} 1 System.out.println(\u0026#34;hello tabs\u0026#34;); 1 console.log(\u0026#34;hello tabs\u0026#34;); ","permalink":"https://loyayz.com/website/220613-hugo-papermodx-support-tabs/","summary":"需求：新建一个模板，支持在文章正文中显示多标签页 实现步骤： 创建模板 ./layouts/shortcodes/tabs.html 1 2 3 4 \u0026lt;div class=\u0026#34;x-tabs\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;x-tabs-nav\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;x-tabs-content\u0026#34;\u0026gt;{{ .Inner }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ./layouts/shortcodes/tab.html 1 2 3 \u0026lt;div class=\u0026#34;x-tab\u0026#34; title=\u0026#34;{{ .Get 0 }}\u0026#34;\u0026gt; {{ .Inner }} \u0026lt;/div\u0026gt; 添加样式 ./assets/css/extended/custom.css 1 2 3 4","title":"PaperModx 模板：多标签页"},{"content":"需求：在文章页面底部展示该文章所属系列的文章列表\n实现步骤：\n新建模板 ./layouts/partial/series-posts.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 {{- if .Params.series }} \u0026lt;div class=\u0026#34;x-post-series\u0026#34;\u0026gt; {{- $series := .Site.Taxonomies.series}} {{- range .Params.series}} {{- $seriesName := . }} {{- range $name, $value := $series }} {{- if or (eq $name $seriesName) (eq ($name|urlize) ($seriesName|urlize) ) }} \u0026lt;details open\u0026gt; \u0026lt;summary\u0026gt;{{ $seriesName }}\u0026lt;/summary\u0026gt; \u0026lt;ol\u0026gt; {{- range $value.Pages.ByDate }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{.Permalink}}\u0026#34;\u0026gt;{{.LinkTitle}}\u0026lt;/a\u0026gt; \u0026lt;sub\u0026gt;{{- .Date.Format .Site.Params.DateFormat -}}\u0026lt;/sub\u0026gt; \u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ol\u0026gt; \u0026lt;/details\u0026gt; {{- end }} {{- end }} {{/* end range site series */}} {{- end }} {{/* end range page series */}} \u0026lt;/div\u0026gt; {{- end }} {{/* end .Params.series */}} 添加样式 ./assets/css/extended/custom.css 1 2 3 .x-post-series { padding: 16px 0; } 编辑文章模板 ./layouts/_default/single.html 38 39 40 41 42 \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; \u0026lt;!-- 添加下面这几行 --\u0026gt; {{- if and site.Params.ShowSeriesInPost (ne .Params.showSeries false ) }} {{- partial \u0026#34;series-posts.html\u0026#34; . -}} {{- end }} 使用姿势 ./config.yml 1 2 3 params: # 是否在文章页显示所属系列的文章列表 ShowSeriesInPost: true 设置文章所属系列，比如本篇是这样：\n1 2 3 4 5 6 7 8 9 --- title: \u0026#34;PaperMod 文章页展示所属系列的文章列表\u0026#34; date: 2022-06-12 draft: false tags: [\u0026#34;hugo\u0026#34;, \u0026#34;paper-modx\u0026#34;] series: [\u0026#34;PaperModx 定制文章页\u0026#34;] # 是否在本页展示系列文章，默认值 true showSeries: true --- ","permalink":"https://loyayz.com/website/220612-hugo-papermodx-series-in-post-page/","summary":"需求：在文章页面底部展示该文章所属系列的文章列表 实现步骤： 新建模板 ./layouts/partial/series-posts.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 {{- if .Params.series }} \u0026lt;div class=\u0026#34;x-post-series\u0026#34;\u0026gt; {{- $series := .Site.Taxonomies.series}} {{- range","title":"PaperMod 文章页展示所属系列的文章列表"},{"content":"需求：新增一个模板，用来统计文章篇数和字数，并展示在列表页和归档页\n实现步骤：\n新建统计模板 ./layouts/partials/stat.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{- $scratch := newScratch -}} {{- $kind := .Kind }} {{- $pages := where site.RegularPages \u0026#34;Type\u0026#34; \u0026#34;in\u0026#34; site.Params.mainSections -}} {{- if eq $kind \u0026#34;pages\u0026#34; -}} {{- $pages = .pages -}} {{- else if or (eq $kind `term`) (eq $kind `section`) -}} {{- $pages = union .RegularPages .Sections -}} {{- end -}} {{- range $pages -}} {{- $scratch.Add \u0026#34;words\u0026#34; .WordCount -}} {{- end -}} {{- $words := $scratch.Get \u0026#34;words\u0026#34; | default 0 }} {{- printf \u0026#34;%s 篇 %s 字\u0026#34; ((len $pages) | string) ($words | string) -}} 编辑模板 ./layouts/_default/list.html 22 23 24 25 26 27 28 \u0026lt;!-- 列表模板--\u0026gt; {{- if (.Param \u0026#34;ShowStatInSectionTermList\u0026#34; | default true) }} \u0026lt;sup class=\u0026#34;archive-count\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;{{- partial \u0026#34;stat.html\u0026#34; . }}\u0026lt;/sup\u0026gt; {{- end }} \u0026lt;!-- h1 这行上面 --\u0026gt; \u0026lt;/h1\u0026gt; ./layouts/_default/archives.html 20 21 22 23 24 25 26 27 28 29 \u0026lt;!-- 归档模板--\u0026gt; \u0026lt;h2 class=\u0026#34;archive-year-header\u0026#34;\u0026gt; {{- replace .Key \u0026#34;0001\u0026#34; \u0026#34;\u0026#34; }} {{- if (site.Params.ShowStatInArchive | default true) }} \u0026lt;sup class=\u0026#34;archive-count\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;{{- partial \u0026#34;stat.html\u0026#34; (dict \u0026#34;Kind\u0026#34; \u0026#34;pages\u0026#34; \u0026#34;pages\u0026#34; .Pages) }}\u0026lt;/sup\u0026gt; {{- else }} \u0026lt;sup class=\u0026#34;archive-count\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;{{ len .Pages }}\u0026lt;/sup\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; 使用姿势 可直接使用，不需要修改，也可通过以下配置隐藏统计\n./config.yml 1 2 3 params: ShowStatInSectionTermList: false ShowStatInArchive: false ","permalink":"https://loyayz.com/website/220611-hugo-papermodx-template-for-calculate-word-count/","summary":"需求：新增一个模板，用来统计文章篇数和字数，并展示在列表页和归档页 实现步骤： 新建统计模板 ./layouts/partials/stat.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{- $scratch := newScratch -}} {{- $kind := .Kind","title":"PaperModx 模板：统计文章篇数和字数"},{"content":"需求：在搜索页展示系列列表\n以下是实现步骤\n编辑搜索页面模板 ./layouts/_default/search.html 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 {{- if not (.Param \u0026#34;hideSeries\u0026#34;)}} {{- $taxonomies := .Site.Taxonomies.series }} {{- if gt (len $taxonomies) 0 }} \u0026lt;h2 style=\u0026#34;margin-top: 32px\u0026#34;\u0026gt;{{- (.Param \u0026#34;seriesTitle\u0026#34;) | default \u0026#34;series\u0026#34; }}\u0026lt;/h2\u0026gt; \u0026lt;ul class=\u0026#34;terms-tags\u0026#34;\u0026gt; {{- range $name, $value := $taxonomies }} {{- $count := .Count }} {{- with site.GetPage (printf \u0026#34;/series/%s\u0026#34; $name) }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .Name }} \u0026lt;sup\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;sup\u0026gt;{{ $count }}\u0026lt;/sup\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/sup\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; {{- end }} {{- end }} \u0026lt;/ul\u0026gt; {{- end }} {{- end }} {{- end }}{{/* end main */}} \u0026lt;!-- 在最后一行前加入上面的代码 --\u0026gt; 使用姿势 ./config.yml 1 2 3 4 # 设置文章分类 https://gohugo.io/content-management/taxonomies taxonomies: tag: tags series: series 设置文章所属系列，比如本篇是这样：\n1 2 3 4 5 6 7 --- title: \u0026#34;PaperMod 搜索页展示系列列表\u0026#34; date: 2022-06-10 draft: false tags: [\u0026#34;hugo\u0026#34;, \u0026#34;paper-modx\u0026#34;] series: [\u0026#34;PaperModx 定制搜索页\u0026#34;] --- 可通过以下配置隐藏系列列表\n./content/search.md 1 2 3 4 5 6 7 --- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; # 是否隐藏系列 hideSeries: false seriesTitle: 系列 --- ","permalink":"https://loyayz.com/website/220610-hugo-papermodx-series-in-search-page.md/","summary":"需求：在搜索页展示系列列表 以下是实现步骤 编辑搜索页面模板 ./layouts/_default/search.html 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 {{- if not (.Param \u0026#34;hideSeries\u0026#34;)}} {{- $taxonomies := .Site.Taxonomies.series }} {{- if gt (len $taxonomies) 0 }} \u0026lt;h2 style=\u0026#34;margin-top: 32px\u0026#34;\u0026gt;{{- (.Param \u0026#34;seriesTitle\u0026#34;) | default","title":"PaperMod 搜索页展示系列列表"},{"content":"需求：在搜索页展示标签列表\n原因：标签页（/tags）需要一个入口，但是 PaperMod 默认的标签页比较简洁，占用一个菜单感觉有点浪费，而搜索页面内提供标签列表似乎挺合理。\n以下是实现步骤\n编辑搜索页面模板 ./layouts/_default/search.html 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 {{- if not (.Param \u0026#34;hideTags\u0026#34;) }} {{- $taxonomies := .Site.Taxonomies.tags }} {{- if gt (len $taxonomies) 0 }} \u0026lt;h2 style=\u0026#34;margin-top: 32px\u0026#34;\u0026gt;{{- (.Param \u0026#34;tagsTitle\u0026#34;) | default \u0026#34;tags\u0026#34; }}\u0026lt;/h2\u0026gt; \u0026lt;ul class=\u0026#34;terms-tags\u0026#34;\u0026gt; {{- range $name, $value := $taxonomies }} {{- $count := .Count }} {{- with site.GetPage (printf \u0026#34;/tags/%s\u0026#34; $name) }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .Name }} \u0026lt;sup\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;sup\u0026gt;{{ $count }}\u0026lt;/sup\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/sup\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; {{- end }} {{- end }} \u0026lt;/ul\u0026gt; {{- end }} {{- end }} {{- end }}{{/* end main */}} \u0026lt;!-- 在最后一行前加入上面的代码 --\u0026gt; 使用姿势 ./config.yml 1 2 3 4 # 设置文章分类 https://gohugo.io/content-management/taxonomies taxonomies: tag: tags series: series 设置文章所属标签，比如本篇是这样：\n1 2 3 4 5 6 7 --- title: \u0026#34;PaperMod 搜索页展示标签列表\u0026#34; date: 2022-06-09 draft: false tags: [\u0026#34;hugo\u0026#34;, \u0026#34;paper-modx\u0026#34;] series: [\u0026#34;PaperModx 定制搜索页\u0026#34;] --- 可通过以下配置隐藏标签列表\n./content/search.md 1 2 3 4 5 6 7 --- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; # 是否隐藏标签 hideTags: true tagsTitle: 标签 --- ","permalink":"https://loyayz.com/website/220609-hugo-papermodx-tags-in-search-page/","summary":"需求：在搜索页展示标签列表 原因：标签页（/tags）需要一个入口，但是 PaperMod 默认的标签页比较简洁，占用一个菜单感觉有点浪费，而搜索页面内提供标签","title":"PaperMod 搜索页展示标签列表"},{"content":"需求：当文章比较长时无法点到面包屑，因此需要在文章页面的底部添加面包屑导航\n编辑文章页面模板 ./layouts/_default/single.html 38 39 40 41 42 43 44 45 \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; \u0026lt;!-- 添加下面这行 --\u0026gt; {{ partial \u0026#34;breadcrumbs.html\u0026#34; . }} {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} \u0026lt;/footer\u0026gt; 添加样式 ./assets/css/extended/custom.css 1 2 3 4 /* 文章页面底部的面包屑居右 */ .post-footer \u0026gt; .breadcrumbs { justify-content: flex-end; } ","permalink":"https://loyayz.com/website/220608-hugo-papermodx-breadcrumbs-in-post-footer/","summary":"需求：当文章比较长时无法点到面包屑，因此需要在文章页面的底部添加面包屑导航 编辑文章页面模板 ./layouts/_default/single.html 38 39 40 41 42 43 44 45 \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; \u0026lt;!-- 添加下面这行 --\u0026gt; {{ partial \u0026#34;breadcrumbs.html\u0026#34; . }} {{-","title":"PaperMod 文章页底部添加面包屑导航"},{"content":"需求：PaperMod 列表页面和文章页面的导航文字都是上一页/下一页，这在中文表述中不太准确，因此将文章页面的文字改为上一篇/下一篇\n编辑 i18n 1 2 3 4 5 6 # 加入这几行 - id: prev_post translation: \u0026#34;上一篇\u0026#34; - id: next_post translation: \u0026#34;下一篇\u0026#34; 编辑页面导航模板 ./layouts/partials/post_nav_links.html 1 2 {{ i18n \u0026#34;prev_page\u0026#34; }} 改为 {{ i18n \u0026#34;prev_post\u0026#34; }} {{ i18n \u0026#34;next_page\u0026#34; }} 改为 {{ i18n \u0026#34;next_post\u0026#34; }} ","permalink":"https://loyayz.com/website/220607-hugo-papermodx-distinguish-nav/","summary":"需求：PaperMod 列表页面和文章页面的导航文字都是上一页/下一页，这在中文表述中不太准确，因此将文章页面的文字改为上一篇/下一篇 编辑 i18n 1","title":"PaperMod 区分列表和文章的导航文字"},{"content":"需求：新增模板用来随机显示图片，支持partials和shortcodes\n👇 随机的图片，刷新页面看看效果 👇\n1 实现原理 基于unsplash提供的随机图片链接生成\u0026lt;img\u0026gt;\n1 2 3 \u0026lt;img loading=\u0026#34;lazy\u0026#34; alt=\u0026#34;\u0026#34; class=\u0026#34;x-random-img\u0026#34; src=\u0026#34;https://source.unsplash.com/random/720x400?star\u0026#34; width=\u0026#34;720\u0026#34; height=\u0026#34;400\u0026#34; data-topic=\u0026#34;star\u0026#34;/\u0026gt; https://source.unsplash.com/random：会被重定向到一张随机图片 /720x400：限定图片宽高，unsplash 会缩放或截取原图 ?star：限定图片主题，可为空，多个主题用逗号隔开wallpapers,star,nature width=\u0026quot;720\u0026quot; height=\u0026quot;400\u0026quot;：限定\u0026lt;img\u0026gt;宽高，也可用 css 样式控制 data-topic=\u0026quot;star\u0026quot;：我设的属性，用来生成链接 2 实现过程 2.1 创建 js ./assets/js/random-image.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 import * as params from \u0026#39;@params\u0026#39;; let opt = { api: \u0026#39;https://source.unsplash.com/random/${w}x${h}?${t}\u0026#39;, width: 1, height: 0.5, topic: \u0026#39;\u0026#39; }; Object.assign(opt, params.opt || {}); function _cssVar(key, defaultVal) { let num = window.getComputedStyle(document.body).getPropertyValue(key); if (!num) { return defaultVal; } num = num.replace(\u0026#39;px\u0026#39;, \u0026#39;\u0026#39;); return Number.parseInt(num); } let defaultWidth = Number.parseFloat(opt.width); if (defaultWidth \u0026lt;= 1) { defaultWidth = _cssVar(\u0026#39;--main-width\u0026#39;, 720) * defaultWidth; } let defaultHeight = Number.parseFloat(opt.height); if (defaultHeight \u0026lt;= 1) { defaultHeight = window.innerHeight * defaultHeight; } document.querySelectorAll(\u0026#39;.x-random-img\u0026#39;).forEach($img =\u0026gt; { let _src = $img.getAttribute(\u0026#39;src\u0026#39;) || \u0026#39;#\u0026#39;; if (_src !== \u0026#39;#\u0026#39;) { return; } let _topic = $img.getAttribute(\u0026#39;data-topic\u0026#39;) || opt.topic; let _width = Number.parseInt($img.getAttribute(\u0026#39;width\u0026#39;) || defaultWidth); let _height = Number.parseInt($img.getAttribute(\u0026#39;height\u0026#39;) || defaultHeight); _width = (_width % 10 === 0 ? _width : _width + 10 - _width % 10) + \u0026#39;\u0026#39;; _height = (_height % 10 === 0 ? _height : _height + 10 - _height % 10) + \u0026#39;\u0026#39;; _src = opt.api .replace(\u0026#39;${w}\u0026#39;, _width) .replace(\u0026#39;${h}\u0026#39;, _height) .replace(\u0026#39;${t}\u0026#39;, _topic); $img.setAttribute(\u0026#39;src\u0026#39;, _src); $img.setAttribute(\u0026#39;width\u0026#39;, _width); $img.setAttribute(\u0026#39;height\u0026#39;, _height); }); 2.2 引用 js ./layouts/partials/footer.html 1 2 3 4 5 \u0026lt;!-- 在最后面加入这段 --\u0026gt; {{- if (site.Params.randomImage.enable | default true) }} {{- $random_image_js := resources.Get \u0026#34;js/random-image.js\u0026#34; | js.Build (dict \u0026#34;params\u0026#34; (dict \u0026#34;opt\u0026#34; .Site.Params.randomImage)) | resources.Minify }} \u0026lt;script defer crossorigin=\u0026#34;anonymous\u0026#34; src=\u0026#34;{{ $random_image_js.RelPermalink }}\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{- end -}} 2.3 添加样式 ./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 .x-random-img { border-radius: 0 !important; } /* 文章页面内的随机图片水平居中 */ .post-content .x-random-img { margin: 1rem auto; } 2.4 新增模板 ./layouts/partials/templates/random_image.html 1 2 3 4 5 \u0026lt;img loading=\u0026#34;lazy\u0026#34; alt=\u0026#34;\u0026#34; class=\u0026#34;x-random-img {{ .class }}\u0026#34; {{ with .width }}width=\u0026#34;{{.}}\u0026#34;{{ end }} {{ with .height }}height=\u0026#34;{{.}}\u0026#34;{{ end }} {{ with .topic }}data-topic=\u0026#34;{{.}}\u0026#34;{{ end }} /\u0026gt; ./layouts/shortcodes/random_image.html 1 2 3 4 5 \u0026lt;img loading=\u0026#34;lazy\u0026#34; alt=\u0026#34;\u0026#34; class=\u0026#34;x-random-img {{ .Get \u0026#34;class\u0026#34; }}\u0026#34; {{ with .Get \u0026#34;width\u0026#34; }}width=\u0026#34;{{.}}\u0026#34;{{ end }} {{ with .Get \u0026#34;height\u0026#34; }}height=\u0026#34;{{.}}\u0026#34;{{ end }} {{ with .Get \u0026#34;topic\u0026#34; }}data-topic=\u0026#34;{{.}}\u0026#34;{{ end }} /\u0026gt; 3. 使用姿势 shortcodes 1 2 3 4 5 \u0026lt;!-- 因 Hugo 会自动解析模板，这里 {{ 和 \u0026lt; 之间有个空格，使用时记得删除 --\u0026gt; \u0026lt;!-- 最简方式 --\u0026gt; {{ \u0026lt; random_image \u0026gt;}} \u0026lt;!-- 完整参数 --\u0026gt; {{ \u0026lt; random_image width=\u0026#34;\u0026#34; height=\u0026#34;\u0026#34; topic=\u0026#34;\u0026#34; class=\u0026#34;\u0026#34; \u0026gt;}} partials 1 2 3 4 \u0026lt;!-- 最简方式 --\u0026gt; {{- partial \u0026#34;templates/random_image.html\u0026#34; }} \u0026lt;!-- 完整参数 --\u0026gt; {{- partial \u0026#34;templates/random_image.html\u0026#34; (dict \u0026#34;width\u0026#34; \u0026#34;\u0026#34; \u0026#34;height\u0026#34; \u0026#34;\u0026#34; \u0026#34;topic\u0026#34; \u0026#34;\u0026#34; \u0026#34;class\u0026#34; \u0026#34;\u0026#34;) }} 参数说明 模板参数 参数 说明 默认值 width 图片宽 config.yml的params.randomImage.width height 图片高 config.yml的params.randomImage.height topic 图片主题 class \u0026lt;img\u0026gt;样式 网站配置 ./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 params: # 全局默认值，非必须 randomImage: # 是否启用，默认 true enable: true # 图片链接，默认值如下，可替换为其他服务提供者 api: \u0026#39;https://source.unsplash.com/random/${w}x${h}?${t}\u0026#39; # 图片宽，默认 1，不大于 1 时将自动计算为 页面宽*width 并向上取整 # 解析时将替换 randomImage.api 中 ${w} width: \u0026#34;\u0026#34; # 图片高，默认 0.5，不大于 1 时将自动计算为 屏幕高*height 并向上取整 # 解析时将替换 randomImage.api 中 ${h} height: \u0026#34;\u0026#34; # 图片主题，无默认值 # 解析时将替换 randomImage.api 中 ${t} topic: \u0026#34;\u0026#34; ","permalink":"https://loyayz.com/website/220606-hugo-papermodx-template-for-random-image/","summary":"需求：新增模板用来随机显示图片，支持partials和shortcodes 👇 随机的图片，刷新页面看看效果 👇 1 实现原理 基于unsplash提供","title":"PaperModx 模板：随机显示图片"},{"content":"需求：添加归档页面显示所有文章\n暂无自定义要求，直接使用 PaperMod 默认页面，这里记下使用步骤和注意事项\n新建页面 1 hugo new archives.md ./content/archives.md 1 2 3 4 --- title: \u0026#34;归档\u0026#34; layout: \u0026#34;archives\u0026#34; --- 修改网站配置 ./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 # 添加菜单 menu: main: - name: 归档 url: archives/ params: # Hugo 默认只把 ./content/ 目录下有最多文章的目录设为主目录 # 详情：https://gohugo.io/functions/where/#mainsections # 归档页面默认只显示主目录内的文章，如果有多个目录的话，需要修改这个配置 mainSections: - coding - website ","permalink":"https://loyayz.com/website/220605-hugo-papermodx-add-archives/","summary":"需求：添加归档页面显示所有文章 暂无自定义要求，直接使用 PaperMod 默认页面，这里记下使用步骤和注意事项 新建页面 1 hugo new archives.md ./content/archives.md 1 2 3 4 --- title: \u0026#34;归档\u0026#","title":"PaperMod 添加归档页面"},{"content":"需求：自定义页面底部信息，添加版权说明和关于我两个页面链接\n将./themes/PaperMod/layouts/partials/footer.html 复制到./layouts/partials/footer.html 新建自定义底部信息模板 ./layouts/partials/footer_info.html 1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- 将 footer.html 中 \u0026lt;footer\u0026gt; 的代码移至 footer_info.html --\u0026gt; \u0026lt;footer class=\u0026#34;footer\u0026#34;\u0026gt; {{- if site.Copyright }} \u0026lt;span\u0026gt;{{ site.Copyright | markdownify }}\u0026lt;/span\u0026gt; {{- else }} \u0026lt;span\u0026gt;\u0026amp;copy; {{ now.Year }} \u0026lt;a href=\u0026#34;{{ \u0026#34;\u0026#34; | absLangURL }}\u0026#34;\u0026gt;{{ site.Title }}\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt; {{- end }} \u0026lt;span\u0026gt; Powered by \u0026lt;a href=\u0026#34;https://gohugo.io/\u0026#34; rel=\u0026#34;noopener noreferrer\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo\u0026lt;/a\u0026gt; \u0026amp; \u0026lt;a href=\u0026#34;https://github.com/loyayz/hugo-PaperModx/\u0026#34; rel=\u0026#34;noopener\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperModx\u0026lt;/a\u0026gt; \u0026lt;/span\u0026gt; \u0026lt;/footer\u0026gt; 编辑模板 ./layouts/partials/footer.html 1 2 3 4 \u0026lt;!-- 添加引用 footer_info.html --\u0026gt; {{- if not (.Param \u0026#34;hideFooter\u0026#34;) }} {{- partial \u0026#34;footer_info.html\u0026#34; . }} {{- end }} ./layouts/partials/footer_info.html 1 2 3 4 5 6 7 8 9 \u0026lt;footer class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;span\u0026gt;\u0026amp;copy; {{ now.Year }} \u0026lt;a href=\u0026#34;/about/\u0026#34;\u0026gt;loyayz\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;span\u0026gt; Powered by \u0026lt;a href=\u0026#34;https://gohugo.io/\u0026#34; rel=\u0026#34;noopener noreferrer\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo\u0026lt;/a\u0026gt; \u0026amp; \u0026lt;a href=\u0026#34;https://github.com/loyayz/hugo-PaperModx/\u0026#34; rel=\u0026#34;noopener\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperModx\u0026lt;/a\u0026gt; \u0026lt;/span\u0026gt; \u0026lt;span\u0026gt;·\u0026amp;nbsp;\u0026lt;a href=\u0026#34;/copyright/\u0026#34;\u0026gt;版权说明\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/footer\u0026gt; 注：可以直接修改./layouts/partials/footer.html，我是为了方便后续修改而这样拆分\n","permalink":"https://loyayz.com/website/220604-hugo-papermodx-separate-footer/","summary":"需求：自定义页面底部信息，添加版权说明和关于我两个页面链接 将./themes/PaperMod/layouts/partials/foote","title":"PaperMod 自定义页面底部信息"},{"content":"需求：自动为列表中的文章添加对应的标识：[置顶]、[转载]\n将./themes/PaperMod/layouts/_default/list.html复制到./layouts/_default/list.html ./layouts/_default/list.html 66 67 68 69 70 71 72 73 74 75 \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt; {{- .Title }} \u0026lt;!-- 加入下面这行，表示 weight 值为 1 的文章标题后添加 [置顶] 标识 --\u0026gt; {{- if (eq .Weight 1) }}\u0026lt;sup\u0026gt;\u0026lt;span class=\u0026#34;x-entry-istop\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;[置顶]\u0026lt;/span\u0026gt;\u0026lt;/sup\u0026gt;{{- end }} \u0026lt;!-- 加入下面这行，表示 outer 值为 true 的文章标题后添加 [转载] 标识 --\u0026gt; {{- if (.Param \u0026#34;outer\u0026#34;) }}\u0026lt;sup\u0026gt;\u0026lt;span class=\u0026#34;x-entry-isouter\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;[转载]\u0026lt;/span\u0026gt;\u0026lt;/sup\u0026gt;{{- end }} {{- if .Draft }}\u0026lt;sup\u0026gt;\u0026lt;span class=\u0026#34;entry-isdraft\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;[draft]\u0026lt;/span\u0026gt;\u0026lt;/sup\u0026gt;{{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; 将./themes/PaperMod/layouts/_default/archives.html复制到./layouts/_default/archives.html ./layouts/_default/list.html 31 32 33 34 35 36 37 \u0026lt;h3 class=\u0026#34;archive-entry-title\u0026#34;\u0026gt; {{- .Title | markdownify }} \u0026lt;!-- 归档页面显示 [置顶] 标识怪怪的，所以这里没添加 --\u0026gt; \u0026lt;!-- 加入下面这行，表示 outer 值为 true 的文章标题后添加 [转载] 标识 --\u0026gt; {{- if (.Param \u0026#34;outer\u0026#34;) }}\u0026lt;sup\u0026gt;\u0026lt;span class=\u0026#34;x-entry-isouter\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;[转载]\u0026lt;/span\u0026gt;\u0026lt;/sup\u0026gt;{{- end }} {{- if .Draft }}\u0026lt;sup\u0026gt;\u0026lt;span class=\u0026#34;entry-isdraft\u0026#34;\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp;[draft]\u0026lt;/span\u0026gt;\u0026lt;/sup\u0026gt;{{- end }} \u0026lt;/h3\u0026gt; 修改样式 ./assets/_css/extended/custom.css 1 2 3 4 5 6 7 8 9 .x-entry-isouter { font-size: 14px; color: #cd201f; } .x-entry-isouter { font-size: 14px; color: #2db7f5; } 使用姿势：在文章页面修改配置来开关标识 1 2 3 4 5 6 7 8 9 --- title: \u0026#34;测试\u0026#34; date: 2022-06-03 draft: false # 1 表示置顶 weight: 1 # true 表示是转载 outer: true --- ","permalink":"https://loyayz.com/website/220603-hugo-papermodx-sign-title-in-list/","summary":"需求：自动为列表中的文章添加对应的标识：[置顶]、[转载] 将./themes/PaperMod/layouts/_default/list.","title":"PaperMod 列表文章标题后添加标识"},{"content":"1 说明 文章元数据：文章的页面配置及一些内置的变量 1 2 3 4 5 6 7 8 9 10 --- title: \u0026#34;PaperMod 文章元数据前添加图标\u0026#34; date: 2022-06-02 draft: false isCJKLanguage: true tags: [\u0026#34;hugo\u0026#34;, \u0026#34;paper-modx\u0026#34;] categories: [\u0026#34;website\u0026#34;] --- 页面配置：定义在 Hugo 文章源码头部的信息，比如上面这些就是本篇的页面配置 需求：本站使用 PaperMod 主题，文章元数据在两个地方，默认展示方式有点单调，因此想在原基础上给每个文本前添加图标\n文章详情页：正文上面头部标题和描述的下一行 文章列表页：每个文章项的底部 下面是具体实现步骤，其他主题也可参考，只要修改对应的展示模板就行\n2 修改网站配置 ./config.yml 1 2 3 4 params: hideMeta: false ShowReadingTime: true ShowWordCount: true 3 新建元数据模板文件 ./layouts/partials/post_meta.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;date\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;date\u0026#34; (slice \u0026#34;calendar\u0026#34; (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;words\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;words\u0026#34; (slice \u0026#34;file-text\u0026#34; (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;read_time\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;read_time\u0026#34; (slice \u0026#34;clock\u0026#34; (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;author\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;author\u0026#34; (slice \u0026#34;avatar\u0026#34; .)}} {{ end }} {{ $metaItems := $scratch.Get \u0026#34;meta_items\u0026#34; }} {{ range ($scratch.Get \u0026#34;meta_keys\u0026#34;) }} {{ $icon := (partial \u0026#34;extend_svg.html\u0026#34; (index $metaItems . 0)) }} {{ $text := (printf \u0026#34;\u0026lt;span\u0026gt;%s\u0026lt;/span\u0026gt;\u0026#34; (index $metaItems . 1)) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf \u0026#34;\u0026lt;span class=\\\u0026#34;x-post-meta-item\\\u0026#34;\u0026gt;%s%s\u0026lt;/span\u0026gt;\u0026#34; $icon $text )) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34;\u0026amp;nbsp;·\u0026amp;nbsp;\u0026#34; }} {{ end }} 点此查看本步骤的说明 通过查看两个页面源码（文章详情页themes/PaperMod/layouts/_default/single.html、文章列表页themes/PaperMod/layouts/_default/list.html）可发现它们引用了同一个模板展示文章元数据{{- partial \u0026quot;post_meta.html\u0026quot; . -}}\n查阅 Partial Templates | Hugo 可知，可以在网站根目录新建模板文件覆盖主题模板\nPartial templates—like single page templates and list page templates—have a specific lookup order. However, partials are simpler in that Hugo will only check in two places:\nlayouts/partials/*.html themes//layouts/partials/*.html This allows a theme’s end user to copy a partial’s contents into a file of the same name for further customization.\n4 新建图标模板文件 ./layouts/partials/extend_svg.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 {{ $icon_name := . }} {{ if (eq $icon_name \u0026#34;\u0026#34;) }} {{ else if (eq $icon_name \u0026#34;calendar\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;file-text\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;clock\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;avatar\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;tag\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else }} {{ partial \u0026#34;svg.html\u0026#34; (dict \u0026#34;name\u0026#34; $icon_name) }} {{ end }} 为省略篇幅这里\u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt;没写内容，可点此查看 PaperModx 完整内容 5 添加样式 ./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 9 10 11 .x-post-meta-item { display: inline-block; } .x-post-meta-item svg { width: 1em; height: 1em; display: inline-block; vertical-align: -0.15em; margin-right: 4px; } ","permalink":"https://loyayz.com/website/220602-hugo-papermodx-post-meta/","summary":"1 说明 文章元数据：文章的页面配置及一些内置的变量 1 2 3 4 5 6 7 8 9 10 --- title: \u0026#34;PaperMod 文章元数据前添加图标\u0026#34; date: 2022-06-02 draft: false isCJKLanguage: true tags: [\u0026#34;hugo\u0026#34;, \u0026#34;paper-modx\u0026#34;] categories: [\u0026#34;website\u0026#34;] --- 页面配置：定","title":"PaperMod 文章元数据前添加图标"},{"content":"通过 Markdown Render Hooks | Hugo 实现此功能\n./layouts/_default/_markup/render-link.html 1 \u0026lt;a href=\u0026#34;{{ .Destination | safeURL }}\u0026#34;{{ with .Title}} title=\u0026#34;{{ . }}\u0026#34;{{ end }}{{ if strings.HasPrefix .Destination \u0026#34;http\u0026#34; }} target=\u0026#34;_blank\u0026#34; rel=\u0026#34;noopener nofollow noreferrer\u0026#34; {{ end }}\u0026gt;{{ .Text | safeHTML }}\u0026lt;/a\u0026gt; ","permalink":"https://loyayz.com/website/220601-hugo-papermodx-open-external-links-in-a-new-tab/","summary":"通过 Markdown Render Hooks | Hugo 实现此功能 ./layouts/_default/_markup/render-link.html 1 \u0026lt;a href=\u0026#34;{{ .Destination | safeURL }}\u0026#34;{{ with .Title}} title=\u0026#34;{{ . }}\u0026#34;{{ end }}{{ if strings.HasPrefix .Destination \u0026#34;http\u0026#34; }} target=\u0026#34;_blank\u0026#34; rel=\u0026#34;noopener nofollow noreferrer\u0026#34; {{ end }}\u0026gt;{{ .Text | safeHTML }}\u0026lt;/a\u0026gt;","title":"Hugo 用新标签页打开外部链接"},{"content":"通过 Markdown Render Hooks | Hugo 实现此功能\n1 新建模板 ./layouts/_default/_markup/render-codeblock.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{- $lang := .Type | default \u0026#34;text\u0026#34; }} {{- $title := (split (.Attributes.title | default \u0026#34;\u0026#34;) \u0026#34;;\u0026#34;) }} {{- $titleText := (trim (index $title 0 | default \u0026#34;\u0026#34;) \u0026#34; \u0026#34;) }} {{- $titleShowName := (trim (index $title 1 | default \u0026#34;true\u0026#34;) \u0026#34; \u0026#34;) }} {{- $titleName := (trim (index $title 2 | default \u0026#34;\u0026#34;) \u0026#34; \u0026#34;) }} \u0026lt;div class=\u0026#34;x-highlight-wrapper\u0026#34;\u0026gt; {{- if gt (len $titleText) 0 }} \u0026lt;div class=\u0026#34;x-highlight-title\u0026#34;\u0026gt; {{- if eq $titleShowName \u0026#34;true\u0026#34; }} \u0026lt;strong\u0026gt;{{- $titleName }}\u0026lt;/strong\u0026gt; {{- end }} {{ $titleText }} \u0026lt;/div\u0026gt; {{- end }} {{ highlight .Inner $lang .Options }} \u0026lt;/div\u0026gt; 2 添加样式 ./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 .x-highlight-wrapper :nth-child(2) { margin-top: 0 !important; border-top-left-radius: 0 !important; border-top-right-radius: 0 !important; } /* --hljs-bg 和 --radius 是 PaperMod 主题提供的变量 */ .x-highlight-title { background: var(--hljs-bg) !important; border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); color: #e7ce56; padding: 4px 0 0 16px; font-size: .78em; } 3 使用方式 ```html { title=\u0026ldquo;我是文件名\u0026rdquo; }\n```\n我是文件名 1 代码块加上 title 属性，使用时得加上代码块所属语言 ```markdown { title=\u0026ldquo;我只是个标题;false\u0026rdquo; }\n```\n我只是个标题 1 第二个参数控制是否在标题前加前缀，默认值 \u0026#34;true\u0026#34; ```text { title=\u0026ldquo;loyayz;true;我是：\u0026rdquo; }\n```\n我是： loyayz 1 第三个参数是前缀名，无默认值 ","permalink":"https://loyayz.com/website/220531-hugo-papermodx-codeblock-show-title/","summary":"通过 Markdown Render Hooks | Hugo 实现此功能 1 新建模板 ./layouts/_default/_markup/render-codeblock.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{- $lang := .Type | default \u0026#34;text\u0026#34; }} {{- $title := (split (.Attributes.title | default \u0026#34;\u0026#34;) \u0026#34;;\u0026#34;) }} {{- $titleText := (trim (index $title 0 | default \u0026#34;\u0026#34;) \u0026#34; \u0026#34;) }} {{- $titleShowName := (trim (index","title":"Hugo 代码块显示标题"},{"content":"Hugo 内部模板 已集成 Google Analytics，本篇记录下如何使用\n1 注册 Google Analytics 登录 Google Analytics 点击首页的开始衡量按钮 按页面提示创建账号，创建成功后会自动跳转至管理页 按页面提示设置数据流，设置成功后会自动跳转至详情页 在数据流详情页找到衡量ID 2 修改网站配置 ./config.yml 1 2 3 4 googleAnalytics: 衡量ID privacy: googleAnalytics: disable: false 3 使用模板 在\u0026lt;head\u0026gt; \u0026lt;/head\u0026gt;中添加下面代码\n1 2 3 {{ if not .Site.IsServer }} {{ template \u0026#34;_internal/google_analytics.html\u0026#34; . }} {{ end }} 22/06/03 updated：PaperModx 是使用这种方式，可以不改下面两个配置\n注：PaperMod 默认已添加模板，但是是通过判断是否生产环境来启用模板的，这样会导致本地调试的时候也会启用，可以通过以下步骤修改\n修改网站配置 ./config.yml 1 2 params: env: dev 修改部署脚本：run: hugo --minify后加上-e production 1 2 - name: Build run: hugo --minify -e production ","permalink":"https://loyayz.com/website/220530-hugo-papermodx-add-google-analytics/","summary":"Hugo 内部模板 已集成 Google Analytics，本篇记录下如何使用 1 注册 Google Analytics 登录 Google Analytics 点击首页的开始衡量按钮 按页面提示创建账号，创建成功后会自动跳转至管","title":"Hugo 添加谷歌分析"},{"content":"PaperMod 已集成 Fuse.js 实现搜索功能，本篇记录下如何使用\n1 新建页面 1 hugo new search.md ./content/search.md 1 2 3 4 --- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; --- 2 修改网站配置 ./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # 添加搜索菜单 menu: main: - name: 搜索 url: search/ weight: 10 params: # 添加搜索参数，参考 https://fusejs.io/api/options.html fuseOpts: isCaseSensitive: false includeMatches: true shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] ","permalink":"https://loyayz.com/website/220529-hugo-papermodx-add-search/","summary":"PaperMod 已集成 Fuse.js 实现搜索功能，本篇记录下如何使用 1 新建页面 1 hugo new search.md ./content/search.md 1 2 3 4 --- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; --- 2 修改网站配置 ./config.yml 1 2 3 4 5 6 7 8 9 10","title":"Hugo PaperMod 添加搜索功能"},{"content":"1 域名配置 登录阿里云 ，进入控制台找到域名服务 点击域名列表 点击要绑定的域名后的解析 点击添加记录 1 2 3 记录类型：CNAME 主机记录：@ 记录值：loyayz.github.io 2 网站配置 添加解析文件 ./static/CNAME 1 loyayz.com 修改网站配置 ./config.yml 1 baseURL: \u0026#34;https://loyayz.com/\u0026#34; 部署后等域名解析完成，浏览器打开链接https://loyayz.com即可看到网站 ","permalink":"https://loyayz.com/website/220528-hugo-custom-domain/","summary":"1 域名配置 登录阿里云 ，进入控制台找到域名服务 点击域名列表 点击要绑定的域名后的解析 点击添加记录 1 2 3 记录类型：CNAME 主机记录：@ 记录值：l","title":"Hugo Github Pages 绑定域名"},{"content":"本站（loyayz.com）文章均为原创文章，如有转载皆已注明。\n本站采用 CC BY-NC-ND 4.0 协议，转载时请遵守以下条款：\n保留署名 loyayz 保留原文链接 不将本作品用于商业目的 禁止演绎，即您将不能在内容上进行混合、修改以及二次创作 本站图片来自我个人的截图及免费正版图片网站：unsplash.com 、pixabay.com 如有任何内容不慎侵犯您的版权，请与我联系 loyayz@foxmail.com ","permalink":"https://loyayz.com/copyright/","summary":"本站（loyayz.com）文章均为原创文章，如有转载皆已注明。 本站采用 CC BY-NC-ND 4.0 协议，转载时请遵守以下条款： 保留署名 loyayz 保留原文链接 不将本作品用","title":"版权说明"},{"content":"Idea Worlds 开发中\u0026hellip;\n⚡ Tech Stack\nBackend: Java tech stack Frontend: Javascript, TypeScript, HTML, CSS, Angular Database: MySQL, PostgreSQL, MongoDB, Redis, Elasticsearch \u0026raquo; a ","permalink":"https://loyayz.com/about/","summary":"Idea Worlds 开发中\u0026hellip; ⚡ Tech Stack Backend: Java tech stack Frontend: Javascript, TypeScript, HTML, CSS, Angular Database: MySQL, PostgreSQL, MongoDB, Redis, Elasticsearch \u0026raquo; a","title":"关于我"}]