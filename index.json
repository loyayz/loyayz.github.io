[{"content":"文章元数据：文章的页面配置及一些内置的变量\n1 2 3 4 5 6 7 8 9 10 页面配置：定义在 Hugo 文章源码头部的信息，比如下面这些就是本篇的页面配置 --- title: \u0026#34;Hugo 自定义展示文章元数据\u0026#34; date: 2022-05-31 draft: false isCJKLanguage: true tags: [\u0026#34;hugo\u0026#34;] categories: [\u0026#34;website\u0026#34;] --- 本站使用 PaperMod 主题，文章元数据在两个地方，默认展示方式有点单调，因此想在原基础上给每个文本前添加图标\n文章详情页：正文上面头部标题和描述的下一行 文章列表页：每个文章项的底部 下面是具体实现步骤，其他主题也可参考，只要修改对应的展示模板就行\n修改网站配置 文件：./config.yml 1 2 3 4 params: hideMeta: false ShowReadingTime: true ShowWordCount: true 新建元数据模板文件 文件：./layouts/partials/post_meta.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;date\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;date\u0026#34; (slice \u0026#34;calendar\u0026#34; (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)) )}} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;words\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;words\u0026#34; (slice \u0026#34;file-text\u0026#34; (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)) )}} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;read_time\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;read_time\u0026#34; (slice \u0026#34;clock\u0026#34; (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)) )}} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta_keys\u0026#34; (slice \u0026#34;author\u0026#34;) }} {{ $scratch.SetInMap \u0026#34;meta_items\u0026#34; \u0026#34;author\u0026#34; (slice \u0026#34;avatar\u0026#34; .)}} {{ end }} {{ $metaItems := $scratch.Get \u0026#34;meta_items\u0026#34; }} {{ range ($scratch.Get \u0026#34;meta_keys\u0026#34;) }} {{ $icon := (partial \u0026#34;extend_svg.html\u0026#34; (index $metaItems . 0)) }} {{ $text := (index $metaItems . 1) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf \u0026#34;\u0026lt;span class=\\\u0026#34;custom-post-meta-item\\\u0026#34;\u0026gt;%s %s\u0026lt;/span\u0026gt;\u0026#34; $icon $text )) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34;\u0026amp;nbsp;·\u0026amp;nbsp;\u0026#34; }} {{ end }} 点此查看本步骤的说明 通过查看两个页面源码（文章详情页themes/PaperMod/layouts/_default/single.html、文章列表页themes/PaperMod/layouts/_default/list.html）可发现它们引用了同一个模板展示文章元数据{{- partial \u0026quot;post_meta.html\u0026quot; . -}}\n查阅 Partial Templates | Hugo 可知，可以在网站根目录新建模板文件覆盖主题模板\nPartial templates—like single page templates and list page templates—have a specific lookup order. However, partials are simpler in that Hugo will only check in two places:\nlayouts/partials/*.html themes//layouts/partials/*.html This allows a theme’s end user to copy a partial’s contents into a file of the same name for further customization.\n新建图标模板文件 文件：./layouts/partials/extend_svg.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 {{ $icon_name := . }} {{ if (eq $icon_name \u0026#34;\u0026#34;) }} {{ else if (eq $icon_name \u0026#34;calendar\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;file-text\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;clock\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;avatar\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else if (eq $icon_name \u0026#34;tag\u0026#34;) }} \u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt; {{ else }} {{ partial \u0026#34;svg.html\u0026#34; (dict \u0026#34;name\u0026#34; $icon_name) }} {{ end }} 为省略篇幅这里\u0026lt;svg\u0026gt; ... \u0026lt;/svg\u0026gt;没写内容，可点此查看完整内容\n添加样式 文件：./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 9 10 .custom-post-meta-item { display: inline-block; } .custom-post-meta-item svg { width: 1em; height: 1em; display: inline-block; vertical-align: -0.15em; } ","permalink":"https://loyayz.com/posts/website/220601-hugo-papermod-custom-post-meta/","summary":"文章元数据：文章的页面配置及一些内置的变量 1 2 3 4 5 6 7 8 9 10 页面配置：定义在 Hugo 文章源码头部的信息，比如下面这些就是本篇的页面配置 --- title: \u0026#34;Hugo 自定","title":"Hugo 自定义展示文章元数据"},{"content":"通过 Hugo Shortcode Templates 包装 内置的 highlight 实现此功能\n新建模板 文件：./layouts/shortcodes/filename-highlight.html 1 2 3 4 5 6 7 8 9 10 11 {{ $filename := .Get \u0026#34;filename\u0026#34; }} {{ $lang := .Get \u0026#34;lang\u0026#34; }} {{ $options := .Get \u0026#34;options\u0026#34; }} {{ $input := (trim .Inner \u0026#34;\\n\\r\u0026#34;) }} \u0026lt;div class=\u0026#34;filename-highlight-wrapper\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;filename-highlight-title\u0026#34;\u0026gt; \u0026lt;strong\u0026gt;文件：\u0026lt;/strong\u0026gt;\u0026lt;span\u0026gt;{{ $filename }}\u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; {{ highlight $input $lang $options }} \u0026lt;/div\u0026gt; 添加样式：该文件是 PaperMod 的拓展样式文件，其他主题请查看对应的方式 文件：./assets/css/extended/custom.css 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 .filename-highlight-wrapper .highlight { margin-top: 0 !important; border-top-left-radius: 0 !important; border-top-right-radius: 0 !important; } /* --hljs-bg 和 --radius 是 PaperMod 的变量 */ .filename-highlight-title { background: var(--hljs-bg) !important; border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); color: #e7ce56; padding: 4px 0 0 16px; font-size: .78em; } .filename-highlight-title span { color: #d5d5d6; } 使用方式： 1 2 3 4 {{ \u0026lt; filename-highlight lang=\u0026#34;javascript\u0026#34; filename=\u0026#34;文件名\u0026#34; \u0026gt;}} 因为模板会自动解析，所以这里 {{ 和 \u0026lt; 之间有个空格，使用的时候记得删除 最终效果看上面两个代码块 {{ \u0026lt;/ filename-highlight \u0026gt;}} ","permalink":"https://loyayz.com/posts/website/220531-hugo-markdown-code-blocks-filename/","summary":"通过 Hugo Shortcode Templates 包装 内置的 highlight 实现此功能 新建模板 文件：./layouts/shortcodes/filename-highlight.html 1 2 3","title":"Hugo Markdown 代码块显示文件名"},{"content":"Hugo 内部模板 已集成 Google Analytics，本篇记录下如何使用\n登录 Google Analytics 点击首页的开始衡量按钮 按页面提示创建账号，创建成功后会自动跳转至管理页 按页面提示设置数据流，设置成功后会自动跳转至详情页 在数据流详情页找到衡量ID 修改网站配置 文件：./config.yml 1 2 3 4 googleAnalytics: 衡量ID privacy: googleAnalytics: disable: false 使用模板：PaperMod 默认已添加模板，其他主题可以在\u0026lt;head\u0026gt;中添加下面代码 1 2 3 {{ if not .Site.IsServer }} {{ template \u0026#34;_internal/google_analytics.html\u0026#34; . }} {{ end }} 注：PaperMod 是通过判断是否生产环境来启用模板的，这样会导致本地调试的时候也会启用，可以通过以下步骤修改\n6.1 修改网站配置\n文件：./config.yml 1 2 params: env: dev 6.2 修改部署脚本：run: hugo --minify后加上-e production\n文件：./.github/workflows/gh-pages.yml 1 2 - name: Build run: hugo --minify -e production ","permalink":"https://loyayz.com/posts/website/220530-hugo-add-google-analytics/","summary":"Hugo 内部模板 已集成 Google Analytics，本篇记录下如何使用 登录 Google Analytics 点击首页的开始衡量按钮 按页面提示创建账号，创建成功后会自动跳转至管理页 按页面","title":"Hugo 添加谷歌分析"},{"content":"PaperMod 已集成 Fuse.js 实现搜索功能，本篇记录下如何使用\n新建页面 1 hugo new search.md 编辑内容 文件：./content/search.md 1 2 3 4 --- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; --- 修改网站配置：添加菜单和参数 文件：./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 menu: main: - name: 搜索 url: search/ weight: 10 params: # 参考 https://fusejs.io/api/options.html fuseOpts: isCaseSensitive: false includeMatches: true shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] ","permalink":"https://loyayz.com/posts/website/220529-hugo-add-search/","summary":"PaperMod 已集成 Fuse.js 实现搜索功能，本篇记录下如何使用 新建页面 1 hugo new search.md 编辑内容 文件：./content/search.md 1 2 3 4 --- title: \u0026#34;搜索\u0026#","title":"Hugo PaperMod 添加搜索功能"},{"content":"1 域名配置 登录阿里云，进入控制台找到域名服务 点击域名列表 点击要绑定的域名后的解析 点击添加记录 1 2 3 记录类型：CNAME 主机记录：@ 记录值：loyayz.github.io 2 网站配置 添加解析文件 文件：./static/CNAME 1 loyayz.com 修改网站配置 文件：./config.yml 1 baseURL: \u0026#34;https://loyayz.com/\u0026#34; 部署后等域名解析完成，浏览器打开链接https://loyayz.com即可看到网站 ","permalink":"https://loyayz.com/posts/website/220528-hugo-custom-domain/","summary":"1 域名配置 登录阿里云，进入控制台找到域名服务 点击域名列表 点击要绑定的域名后的解析 点击添加记录 1 2 3 记录类型：CNAME 主机记录：@ 记录值：l","title":"Hugo Github Pages 绑定域名"},{"content":"基于 Hugo 搭建并部署在 Github Pages\n1 安装 Hugo 官网教程\n新建目录C:\\programs\\hugo 在官网下载最新版，本次下载 hugo_extended_0.99.1_Windows-64bit.zip 解压 zip 文件，并将解压出的hugo.exe移到C:\\programs\\hugo 添加环境变量： win+R -\u0026gt; sysdm.cpl -\u0026gt; 高级 -\u0026gt; 环境变量(N)\u0026hellip; -\u0026gt; 系统变量(S) -\u0026gt; 双击 Path -\u0026gt; 新建 -\u0026gt; 输入C:\\programs\\hugo 打开命令行，输入hugo version，显示版本号即安装成功 2 创建网站 2.1 生成网站 新建目录C:\\code\\loyayz\\loyayz.github.io用于存放网站源码 执行命令生成网站 初始化 git 仓库，未安装 git 请先安装：Git 官网 1 2 3 cd C:\\code\\loyayz\\loyayz.github.io hugo new site . -f yml git init 2.2 使用主题 下载：在官网挑选主题，本次使用 PaperMod 1 git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod 修改网站配置：我是直接用示例配置覆盖后再修改 文件：./config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 baseURL: \u0026#34;https://loyayz.github.io/\u0026#34; title: loyayz theme: PaperMod paginate: 10 enableInlineShortcodes: true enableRobotsTXT: true enableEmoji: true pygmentsUseClasses: true hasCJKLanguage: true defaultContentLanguage: zh timeZone: \u0026#34;Asia/Shanghai\u0026#34; buildDrafts: false buildFuture: false buildExpired: false minify: disableXML: true # minifyOutput: true languages: zh: languageName: \u0026#34;中文\u0026#34; weight: 1 taxonomies: category: categories tag: tags menu: main: - name: 文章 url: posts/ weight: 1 - name: 分类 url: categories/ weight: 2 - name: 标签 url: tags/ weight: 3 outputs: home: - HTML - RSS - JSON params: env: production title: \u0026#34;loyayz\u0026#39;s blog\u0026#34; description: \u0026#34;loyayz\u0026#39;s blog - https://loyayz.com\u0026#34; author: loyayz images: [\u0026#34;papermod-cover.png\u0026#34;] keywords: [loyayz,ideaworlds,simpleframework] DateFormat: \u0026#34;2006-01-02\u0026#34; ShowReadingTime: false ShowShareButtons: false ShowCodeCopyButtons: true ShowFullTextinRSS: false defaultTheme: auto disableThemeToggle: false disableSpecial1stPost: true disableScrollToTop: false disableAnchoredHeadings: false hideMeta: false hideSummary: false showtoc: true tocopen: false ShowPostNavLinks: true ShowBreadCrumbs: true ShowWordCount: false ShowRssButtonInSectionTermList: false comments: false hideFooter: true #homeInfoParams: # Title: \u0026#34;\u0026#34; # Content: socialIcons: - name: github url: \u0026#34;https://github.com/loyayz\u0026#34; - name: email url: \u0026#34;mailto:loyayz@foxmail.com\u0026#34; - name: RsS url: \u0026#34;index.xml\u0026#34; markup: goldmark: renderer: unsafe: true highlight: codeFences: true guessSyntax: true lineNos: true style: monokai privacy: disqus: disable: true googleAnalytics: disable: true instagram: disable: true twitter: disable: true vimeo: disable: true youtube: disable: true 拓展：如下新建拓展文件custom.css、extend_head.html、extend_footer.html 1 2 3 4 5 6 7 8 9 10 .(loyayz.github.io) ├── config.yml ├── assets/ │ └── css/ │ └── extended/ │ └── custom.css └── layouts └── partials ├── extend_footer.html └── extend_head.html 文件：./assets/css/extended/custom.css 1 2 3 4 /* 修改代码块的最大高度 */ .highlight table { max-height: 400px } 2.3 本地调试 命令行内执行命令后，在浏览器打开http://localhost:1313可预览网站\n1 hugo server -D 3 部署到 Github Pages 3.1 新建脚本 Windows 一键提交脚本 文件：./deploy.bat 1 2 3 4 @echo off git add . git commit -m \u0026#34;update\u0026#34; git push Linux 一键提交脚本 文件：./deploy.sh 1 2 3 4 #!/bin/sh git add . git commit -m \u0026#34;update\u0026#34; git push GitHub Action 自动化部署脚本 文件：./.github/workflows/gh-pages.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 name: github pages on: push: branches: - master pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true fetch-depth: 1 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/master\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public 3.2 创建远程仓库 创建远程仓库：打开 GitHub 创建仓库，仓库名为loyayz.github.io其他都不选 新建.gitignore文件避免误操作提交文件 文件：./.gitignore 1 2 3 4 5 6 7 public/ .idea/* .vscode/* !.vscode/settings.json !.vscode/tasks.json !.vscode/launch.json !.vscode/extensions.json 关联本地和远程仓库，提交并推送到 Github 1 2 3 4 5 git add . git commit -m \u0026#34;init\u0026#34; git branch -M master git remote add origin https://github.com/loyayz/loyayz.github.io.git git push --set-upstream origin master 新建仓库说明文档 文件：./README.md 1 2 3 4 5 本仓库使用 git submodule 引用主题仓库，因此 git clone 本仓库后需要再执行下句命令 git submodule update --init --recursive --depth=1 部署：双击`deploy.bat`或执行命令`sh deploy.sh` 双击deploy.bat推送到 Github 触发自动化部署 3.3 修改 Github Pages GitHub Action默认生成网站到gh-pages分支，因此需要修改Github Pages来源\n浏览器打开远程仓库，进入设置页面：Settings -\u0026gt; Pages 将Source 分支中的master换成gh-pages 浏览器打开链接https://loyayz.github.io即可看到网站 4 创建文章 执行命令行启动服务，浏览器打开http://localhost:1313预览网站 1 hugo server -D 打开另一个命令行执行命令创建文章，网站将实时显示新的文章 1 hugo new posts/website/hugo-init.md 编辑文章 文件：./content/posts/website/hugo-init.md 1 2 3 4 5 6 7 8 9 10 --- title: \u0026#34;Hugo Github Pages 网站搭建\u0026#34; date: 2022-05-27 draft: false isCJKLanguage: true tags: [\u0026#34;hugo\u0026#34;] categories: [\u0026#34;website\u0026#34;] --- 基于 [Hugo](https://gohugo.io) 搭建并部署在 [Github Pages](https://pages.github.com) 注意：draft需改为false表示该文章不是草稿，否则推送到远程仓库后不会部署该文章\n双击deploy.bat部署，稍等几秒后刷新https://loyayz.github.io即可看到网站新内容 ","permalink":"https://loyayz.com/posts/website/220527-hugo-init/","summary":"基于 Hugo 搭建并部署在 Github Pages 1 安装 Hugo 官网教程 新建目录C:\\programs\\hugo 在官网下载最新版，本次下载 hugo_extended_0.99.1_Windows-64bit.zip 解压 zip 文件，并将解压出的hugo.","title":"Hugo Github Pages 网站搭建"}]